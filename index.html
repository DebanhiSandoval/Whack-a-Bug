<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bug Bash!</title>
  <style>
    body {
      background-color: #111;
      color: #aaff88;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 10px;
    }

    .scoreboard {
      display: flex;
      justify-content: space-between;
      padding: 0 40px;
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 15px;
      justify-content: center;
      margin: 20px auto;
    }

    .hole {
      background-color: transparent;
      border: 2px solid #888;
      border-radius: 50%;
      position: relative;
      cursor: pointer;
      font-size: 2em;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #66ff66;
    }

    .bug {
      font-size: 2em;
      pointer-events: none;
    }

    .splat {
      font-size: 2em;
      color: #ff5555;
      pointer-events: none;
    }

    .hidden {
      visibility: hidden;
    }

    #game-over {
      font-size: 2em;
      margin-top: 20px;
      color: #ffffff;
    }
  </style>
</head>
<body>

  <div class="scoreboard">
    <div>Score: <span id="score">0</span></div>
    <div><h1>BUG BASH!</h1></div>
    <div>‚è± <span id="timer">30</span>s</div>
  </div>

  <div class="grid" id="grid">
    <!-- 12 holes will be generated by JS -->
  </div>

  <div id="game-over"></div>

  <script>
    const grid = document.getElementById('grid');
    const scoreDisplay = document.getElementById('score');
    const timerDisplay = document.getElementById('timer');
    const gameOverDisplay = document.getElementById('game-over');

    let score = 0;
    let timeLeft = 30;
    let gameInterval;
    let bugTimeouts = [];
    let gameActive = true;

    const bugEmoji = 'ü™≤';
    const splatEmoji = 'üí•';

    // Create 12 holes
    const holes = [];
    for (let i = 0; i < 12; i++) {
      const hole = document.createElement('div');
      hole.classList.add('hole');
      hole.dataset.index = i;
      grid.appendChild(hole);
      holes.push(hole);
    }

    function spawnBug() {
      if (!gameActive) return;

      const emptyHoles = holes.filter(hole => !hole.classList.contains('bug') && !hole.classList.contains('splat'));
      if (emptyHoles.length === 0) return;

      const hole = emptyHoles[Math.floor(Math.random() * emptyHoles.length)];
      hole.classList.add('bug');
      hole.textContent = bugEmoji;

      const removeDelay = Math.random() * 1000 + 1000; // 1-2 seconds
      const timeout = setTimeout(() => {
        hole.classList.remove('bug');
        hole.textContent = '';
      }, removeDelay);

      bugTimeouts.push(timeout);
    }

    function handleClick(e) {
      if (!gameActive) return;

      const hole = e.currentTarget;
      if (hole.classList.contains('bug')) {
        hole.classList.remove('bug');
        hole.classList.add('splat');
        hole.textContent = splatEmoji;

        score += 10;
        scoreDisplay.textContent = score;

        setTimeout(() => {
          hole.classList.remove('splat');
          hole.textContent = '';
        }, 500);
      }
    }

    holes.forEach(hole => {
      hole.addEventListener('click', handleClick);
    });

    function startGame() {
      const bugInterval = setInterval(spawnBug, 600);

      gameInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(gameInterval);
          clearInterval(bugInterval);
          bugTimeouts.forEach(timeout => clearTimeout(timeout));
          gameActive = false;
          gameOverDisplay.innerHTML = `<p>Game Over! Final Score: <strong>${score}</strong></p>`;
        }
      }, 1000);
    }

    startGame();
  </script>

</body>
</html>
